// Generated by CoffeeScript 1.6.2
(function() {
  var BindableSchema, Plugins, bindable, field;

  field = require("./field");

  bindable = require("bindable");

  Plugins = require("./plugins");

  BindableSchema = (function() {
    /*
    */
    function BindableSchema(definition) {
      this.plugins = new Plugins();
      this.root = field(definition, this.plugins);
    }

    /*
    */


    BindableSchema.prototype.use = function(factory) {
      var plugin;

      plugin = factory(this);
      this.plugins.push(plugin);
      return this.root.use(plugin);
    };

    /*
    */


    BindableSchema.prototype.model = function(data) {
      var model;

      model = new bindable.Object(data);
      model.schema = this;
      this.plugins.model(model);
      return model;
    };

    /*
    */


    BindableSchema.prototype.watch = function(target) {
      var watcher;

      watcher = new bindable.Object();
      this.root.watch(target, watcher);
      return watcher;
    };

    return BindableSchema;

  })();

  module.exports = function(definition) {
    return new BindableSchema(definition);
  };

  module.exports.plugins = require("./plugins/index");

}).call(this);
